<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#17212b">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="manifest" href="manifest.json">
<title>MarketX</title>

<!-- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram WebApp SDK -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Unbounded:wght@700;900&family=Geologica:wght@400;500;600;700&display=swap');

:root {
  --bg:     var(--tg-theme-bg-color,           #17212b);
  --sec:    var(--tg-theme-secondary-bg-color, #232e3c);
  --text:   var(--tg-theme-text-color,         #f0f0f0);
  --hint:   var(--tg-theme-hint-color,         #708499);
  --btn:    var(--tg-theme-button-color,       #3b82f6);
  --blue:   #3b82f6;
  --red:    #f43f5e;
  --green:  #10b981;
  --gold:   #f59e0b;
  --purple: #8b5cf6;
  --border: rgba(255,255,255,.07);
  --card:   rgba(255,255,255,.04);
  --nav-h:  62px;
  --safe-b: env(safe-area-inset-bottom,0px);
  --r:      18px;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}
html{height:100%;overflow:hidden}
body{height:100%;width:100%;font-family:'Geologica',system-ui,sans-serif;background:var(--bg);color:var(--text);overflow:hidden;position:fixed;top:0;left:0}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse 80% 50% at 15% -5%,rgba(59,130,246,.13) 0%,transparent 60%),radial-gradient(ellipse 60% 40% at 85% 105%,rgba(244,63,94,.09) 0%,transparent 60%)}

#scroll{position:fixed;top:0;left:0;right:0;bottom:calc(var(--nav-h) + var(--safe-b));overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}
#scroll::-webkit-scrollbar{display:none}

.page{display:none;padding:16px 16px 24px;min-height:100%;position:relative;z-index:1;animation:pgIn .2s ease}
.page.on{display:block}
@keyframes pgIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

.t-h1{font-family:'Unbounded',sans-serif;font-size:21px;font-weight:900;letter-spacing:-.5px;margin-bottom:3px}
.t-sub{font-size:13px;color:var(--hint);margin-bottom:18px}
.t-lbl{font-family:'Unbounded',sans-serif;font-size:10px;font-weight:700;color:var(--hint);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:10px}
.row-bw{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.link-more{font-size:12px;color:var(--blue);font-weight:600;cursor:pointer}

/* HOME */
.home-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.g-label{font-size:11px;color:var(--hint)}
.g-name{font-family:'Unbounded',sans-serif;font-size:18px;font-weight:900}
.role-tag{display:inline-flex;align-items:center;gap:5px;padding:6px 13px;border-radius:20px;font-size:11px;font-weight:700;border:1px solid transparent;cursor:pointer;transition:transform .15s,opacity .15s}
.role-tag:active{transform:scale(.93);opacity:.8}
.rt-own{background:rgba(245,158,11,.14);color:var(--gold);border-color:rgba(245,158,11,.3)}
.rt-mod{background:rgba(139,92,246,.14);color:var(--purple);border-color:rgba(139,92,246,.3)}
.rt-usr{background:rgba(112,132,153,.14);color:var(--hint);border-color:var(--border)}

.hero{background:linear-gradient(135deg,#1d4ed8,#3b82f6 55%,#0ea5e9);border-radius:22px;padding:20px;margin-bottom:18px;position:relative;overflow:hidden}
.hero::before,.hero::after{content:'';position:absolute;border-radius:50%;background:rgba(255,255,255,.08)}
.hero::before{width:110px;height:110px;right:-15px;top:-25px}
.hero::after{width:70px;height:70px;right:35px;bottom:-22px}
.h-tag{display:inline-block;background:rgba(255,255,255,.2);border-radius:8px;padding:3px 10px;font-size:11px;font-weight:600;margin-bottom:8px}
.h-title{font-family:'Unbounded',sans-serif;font-size:17px;font-weight:900;margin-bottom:4px;line-height:1.35}
.h-sub{font-size:12px;opacity:.82;margin-bottom:14px}
.h-cta{display:inline-flex;align-items:center;gap:6px;background:#fff;color:#1d4ed8;border:none;border-radius:12px;padding:9px 18px;font-size:12px;font-weight:700;font-family:'Geologica',sans-serif;cursor:pointer;box-shadow:0 4px 16px rgba(0,0,0,.25);transition:transform .15s}
.h-cta:active{transform:scale(.94)}

.srch-wrap{position:relative;margin-bottom:14px}
.srch-ico{position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:15px;color:var(--hint);pointer-events:none}
.srch-inp{width:100%;background:var(--sec);border:1px solid var(--border);border-radius:14px;padding:12px 16px 12px 42px;color:var(--text);font-family:'Geologica',sans-serif;font-size:14px;outline:none;transition:border-color .2s;-webkit-appearance:none}
.srch-inp:focus{border-color:rgba(59,130,246,.5)}
.srch-inp::placeholder{color:var(--hint)}

.chips{display:flex;gap:8px;overflow-x:auto;padding-bottom:2px;margin-bottom:16px;scrollbar-width:none}
.chips::-webkit-scrollbar{display:none}
.chip{flex-shrink:0;padding:7px 13px;border-radius:20px;font-size:12px;font-weight:600;border:1px solid var(--border);background:var(--sec);color:var(--hint);cursor:pointer;white-space:nowrap;transition:all .17s;user-select:none}
.chip.on{background:var(--blue);border-color:var(--blue);color:#fff}
.chip:active{transform:scale(.92)}

.pgrid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.pcard{background:var(--sec);border:1px solid var(--border);border-radius:var(--r);overflow:hidden;cursor:pointer;position:relative;transition:transform .18s;animation:cardIn .3s ease both}
.pcard:active{transform:scale(.96)}
@keyframes cardIn{from{opacity:0;transform:scale(.94)}to{opacity:1;transform:scale(1)}}
.pimg{width:100%;height:130px;background:var(--card);display:flex;align-items:center;justify-content:center;font-size:52px;position:relative}
.pbdg{position:absolute;top:8px;right:8px;padding:2px 8px;border-radius:6px;font-size:10px;font-weight:700}
.bh{background:var(--red);color:#fff}.bn{background:var(--green);color:#fff}.bs{background:var(--gold);color:#000}
.fbtn{position:absolute;top:8px;left:8px;width:30px;height:30px;border-radius:50%;background:rgba(0,0,0,.35);backdrop-filter:blur(8px);border:none;font-size:15px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform .18s}
.fbtn:active{transform:scale(1.28)}
.pbody{padding:11px 12px}
.pname{font-size:13px;font-weight:600;line-height:1.3;margin-bottom:7px}
.pfoot{display:flex;align-items:center;justify-content:space-between}
.pprice{font-family:'Unbounded',sans-serif;font-size:13px;font-weight:900;color:var(--blue)}
.cbtn{width:28px;height:28px;border-radius:8px;background:var(--blue);border:none;color:#fff;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform .15s}
.cbtn:active{transform:scale(.85)}
.pseller{font-size:10px;color:var(--hint);margin-top:4px}

/* LISTINGS */
.add-btn{width:100%;border:2px dashed rgba(59,130,246,.4);background:rgba(59,130,246,.06);border-radius:16px;padding:16px;display:flex;align-items:center;justify-content:center;gap:8px;color:var(--blue);font-weight:700;font-size:14px;font-family:'Geologica',sans-serif;cursor:pointer;margin-bottom:16px;transition:all .2s}
.add-btn:active{transform:scale(.98);background:rgba(59,130,246,.12)}
.li{background:var(--sec);border:1px solid var(--border);border-radius:16px;padding:14px;display:flex;gap:12px;align-items:center;margin-bottom:10px;cursor:pointer;transition:transform .18s}
.li:active{transform:scale(.98)}
.li-ico{width:54px;height:54px;border-radius:14px;background:var(--card);display:flex;align-items:center;justify-content:center;font-size:28px;flex-shrink:0}
.li-name{font-size:14px;font-weight:600;margin-bottom:3px}
.li-desc{font-size:12px;color:var(--hint);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:180px}
.li-row{display:flex;align-items:center;justify-content:space-between;margin-top:7px}
.li-price{font-family:'Unbounded',sans-serif;font-size:13px;font-weight:900;color:var(--blue)}
.sc{font-size:10px;font-weight:700;padding:3px 9px;border-radius:7px}
.sa{background:rgba(16,185,129,.15);color:var(--green)}.ss{background:rgba(244,63,94,.15);color:var(--red)}.sp{background:rgba(245,158,11,.15);color:var(--gold)}

/* FAV */
.empty{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:70px 20px;text-align:center}
.empty-e{font-size:64px;margin-bottom:14px}
.empty-h{font-family:'Unbounded',sans-serif;font-size:16px;font-weight:900;margin-bottom:6px}
.empty-p{font-size:13px;color:var(--hint)}

/* ADMIN */
.adm-hero{background:linear-gradient(135deg,rgba(245,158,11,.14),rgba(59,130,246,.1));border:1px solid rgba(245,158,11,.25);border-radius:20px;padding:18px;display:flex;align-items:center;gap:14px;margin-bottom:18px}
.adm-ico{font-size:40px}
.adm-title{font-family:'Unbounded',sans-serif;font-size:14px;font-weight:900;color:var(--gold);margin-bottom:3px}
.adm-sub{font-size:12px;color:var(--hint)}
.s4{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:18px}
.scard{background:var(--sec);border:1px solid var(--border);border-radius:16px;padding:16px;text-align:center;cursor:pointer;transition:transform .15s}
.scard:active{transform:scale(.95)}
.sc-ico{font-size:26px;margin-bottom:6px}
.sc-val{font-family:'Unbounded',sans-serif;font-size:19px;font-weight:900;margin-bottom:2px}
.sc-key{font-size:11px;color:var(--hint)}
.urow{background:var(--sec);border:1px solid var(--border);border-radius:14px;padding:12px 14px;display:flex;align-items:center;gap:12px;margin-bottom:8px;transition:transform .15s}
.urow:active{transform:scale(.98)}
.uav{width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Unbounded',sans-serif;font-size:15px;font-weight:900;flex-shrink:0}
.un{font-size:13px;font-weight:600}
.ur{font-size:11px;margin-top:2px}
.utg{font-size:10px;color:var(--hint)}
.ubtns{margin-left:auto;display:flex;gap:6px;flex-shrink:0}
.ubtn{padding:5px 9px;border-radius:8px;font-size:11px;font-weight:700;border:none;cursor:pointer;font-family:'Geologica',sans-serif;transition:transform .15s}
.ubtn:active{transform:scale(.88)}
.uw{background:rgba(245,158,11,.15);color:var(--gold)}.ub{background:rgba(244,63,94,.15);color:var(--red)}.um{background:rgba(139,92,246,.15);color:var(--purple)}

/* PROFILE */
.prf{background:var(--sec);border:1px solid var(--border);border-radius:22px;padding:22px;text-align:center;margin-bottom:16px;position:relative;overflow:hidden}
.prf::before{content:'';position:absolute;top:0;left:0;right:0;height:68px;background:linear-gradient(135deg,rgba(59,130,246,.2),rgba(244,63,94,.1))}
.pav-w{position:relative;display:inline-block;margin-bottom:12px}
.pav{width:76px;height:76px;border-radius:50%;background:linear-gradient(135deg,#3b82f6,#f43f5e);display:flex;align-items:center;justify-content:center;font-family:'Unbounded',sans-serif;font-size:26px;font-weight:900;border:3px solid var(--bg);overflow:hidden;position:relative;z-index:1}
.pav img{width:100%;height:100%;object-fit:cover}
.pcrn{position:absolute;top:-6px;right:-4px;font-size:20px;z-index:2}
.pn{font-family:'Unbounded',sans-serif;font-size:17px;font-weight:900;margin-bottom:6px}
.prt{display:inline-flex;align-items:center;gap:5px;padding:5px 16px;border-radius:20px;font-size:12px;font-weight:700;margin-bottom:16px;border:1px solid transparent}
.pro{background:rgba(245,158,11,.14);color:var(--gold);border-color:rgba(245,158,11,.3)}
.prm{background:rgba(139,92,246,.14);color:var(--purple);border-color:rgba(139,92,246,.3)}
.pru{background:rgba(112,132,153,.14);color:var(--hint);border-color:var(--border)}
.strow{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:var(--border);border-radius:14px;overflow:hidden}
.stc{background:var(--bg);padding:12px 6px;text-align:center}
.stv{font-family:'Unbounded',sans-serif;font-size:15px;font-weight:900;color:var(--blue)}
.stk{font-size:10px;color:var(--hint);margin-top:2px}
.setl{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}
.setr{background:var(--sec);border:1px solid var(--border);border-radius:14px;padding:14px 16px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:transform .15s}
.setr:active{transform:scale(.98)}
.si{font-size:20px;width:32px;text-align:center}
.st_{flex:1;font-size:14px;font-weight:500}
.sa_{color:var(--hint);font-size:18px}
.sred{color:var(--red)}
.pver{text-align:center;font-size:11px;color:var(--hint);padding:6px}

/* NAV */
#nav{position:fixed;bottom:0;left:0;right:0;height:calc(var(--nav-h) + var(--safe-b));padding-bottom:var(--safe-b);background:rgba(23,33,43,.93);backdrop-filter:blur(28px) saturate(1.5);-webkit-backdrop-filter:blur(28px) saturate(1.5);border-top:1px solid var(--border);display:flex;z-index:100}
.nb{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:3px;background:none;border:none;color:var(--hint);cursor:pointer;position:relative;transition:color .2s}
.nb.on{color:var(--blue)}
.nb-i{font-size:23px;transition:transform .2s;display:block}
.nb.on .nb-i{transform:scale(1.15)}
.nb-l{font-size:10px;font-weight:600}
.nb-dot{position:absolute;top:6px;right:calc(50% - 16px);width:7px;height:7px;border-radius:50%;background:var(--red);border:2px solid var(--bg)}
.nb.on::after{content:'';position:absolute;bottom:-1px;width:26px;height:2px;background:var(--blue);border-radius:2px 2px 0 0}

/* MODAL */
.mo{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.65);backdrop-filter:blur(5px);display:none;align-items:flex-end}
.mo.on{display:flex}
.ms{width:100%;max-height:92vh;background:var(--sec);border-radius:22px 22px 0 0;overflow-y:auto;padding:0 18px 36px;animation:sUp .27s cubic-bezier(.32,1.2,.64,1)}
.ms::-webkit-scrollbar{display:none}
@keyframes sUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.mh{width:38px;height:4px;border-radius:2px;background:var(--border);margin:14px auto 18px}
.mt{font-family:'Unbounded',sans-serif;font-size:18px;font-weight:900;margin-bottom:18px}
.fb{margin-bottom:14px}
.fl{font-size:11px;font-weight:700;color:var(--hint);text-transform:uppercase;letter-spacing:.8px;margin-bottom:7px;display:block}
.fc{width:100%;background:var(--bg);border:1px solid var(--border);border-radius:13px;padding:13px 15px;color:var(--text);font-family:'Geologica',sans-serif;font-size:14px;outline:none;transition:border-color .2s;-webkit-appearance:none;appearance:none}
.fc:focus{border-color:rgba(59,130,246,.5)}
.fc::placeholder{color:var(--hint)}
textarea.fc{resize:none;min-height:78px}
.egrid{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
.ej{aspect-ratio:1;border-radius:11px;background:var(--bg);border:2px solid transparent;display:flex;align-items:center;justify-content:center;font-size:26px;cursor:pointer;transition:border-color .15s,transform .15s}
.ej.on{border-color:var(--blue)}
.ej:active{transform:scale(.88)}
.btn-p{width:100%;background:linear-gradient(135deg,#2563eb,#3b82f6);border:none;border-radius:15px;padding:16px;color:#fff;font-family:'Geologica',sans-serif;font-size:15px;font-weight:700;cursor:pointer;margin-top:8px;transition:transform .15s;box-shadow:0 4px 20px rgba(59,130,246,.35)}
.btn-p:active{transform:scale(.97)}

/* PRODUCT DETAIL */
.pd-img{font-size:80px;text-align:center;padding:22px;background:var(--card);border-radius:16px;margin-bottom:16px}
.pd-n{font-family:'Unbounded',sans-serif;font-size:18px;font-weight:900;margin-bottom:4px}
.pd-p{font-family:'Unbounded',sans-serif;font-size:24px;font-weight:900;color:var(--blue);margin-bottom:5px}
.pd-s{font-size:12px;color:var(--hint);margin-bottom:14px}
.pd-d{font-size:14px;color:var(--hint);line-height:1.65;margin-bottom:22px}

/* TOAST */
#toast{position:fixed;top:14px;left:14px;right:14px;z-index:400;background:var(--sec);border:1px solid var(--border);border-radius:14px;padding:13px 16px;display:flex;align-items:center;gap:10px;box-shadow:0 8px 40px rgba(0,0,0,.45);transform:translateY(calc(-100% - 30px));transition:transform .3s cubic-bezier(.34,1.56,.64,1)}
#toast.on{transform:translateY(0)}
.tico{font-size:20px}
.ttxt{font-size:13px;font-weight:500}
</style>
</head>
<body>

<div id="toast"><span class="tico" id="tIco">‚úÖ</span><span class="ttxt" id="tTxt">–ì–æ—Ç–æ–≤–æ</span></div>

<div id="scroll">

<!-- HOME -->
<div class="page on" id="p-home">
  <div class="home-bar">
    <div><div class="g-label">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å,</div><div class="g-name" id="gName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div></div>
    <div class="role-tag rt-own" id="rolePill" onclick="goPage('admin')">üëë –í–ª–∞–¥–µ–ª–µ—Ü</div>
  </div>
  <div class="hero">
    <div class="h-tag">üî• –ê–∫—Ü–∏—è –¥–Ω—è</div>
    <div class="h-title">–°–∫–∏–¥–∫–∏ –¥–æ 60%<br>–Ω–∞ —Ç–æ–ø —Ç–æ–≤–∞—Ä—ã</div>
    <div class="h-sub">–¢–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è ‚Äî –ª—É—á—à–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</div>
    <button class="h-cta" onclick="hpt('light');doChip('all')">–°–º–æ—Ç—Ä–µ—Ç—å ‚Üí</button>
  </div>
  <div class="srch-wrap">
    <span class="srch-ico">üîç</span>
    <input class="srch-inp" id="sInp" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤‚Ä¶" oninput="doSearch(this.value)">
  </div>
  <div class="chips" id="chipRow">
    <div class="chip on" data-c="all"        onclick="doChip('all')">–í—Å–µ</div>
    <div class="chip"    data-c="electronics" onclick="doChip('electronics')">üì± –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</div>
    <div class="chip"    data-c="clothes"     onclick="doChip('clothes')">üëó –û–¥–µ–∂–¥–∞</div>
    <div class="chip"    data-c="games"       onclick="doChip('games')">üéÆ –ò–≥—Ä—ã</div>
    <div class="chip"    data-c="home"        onclick="doChip('home')">üè† –î–æ–º</div>
    <div class="chip"    data-c="sport"       onclick="doChip('sport')">‚öΩ –°–ø–æ—Ä—Ç</div>
    <div class="chip"    data-c="beauty"      onclick="doChip('beauty')">üíÑ –ö—Ä–∞—Å–æ—Ç–∞</div>
  </div>
  <div class="row-bw"><div class="t-lbl" style="margin:0">–ö–∞—Ç–∞–ª–æ–≥</div><div class="link-more">–í—Å–µ ‚Üí</div></div>
  <div class="pgrid" id="pGrid"></div>
</div>

<!-- LISTINGS -->
<div class="page" id="p-listings">
  <div class="t-h1">–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</div>
  <div class="t-sub">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏</div>
  <button class="add-btn" onclick="openAdd()">Ôºã –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
  <div id="lstWrap"></div>
</div>

<!-- FAV -->
<div class="page" id="p-fav">
  <div class="t-h1">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
  <div class="t-sub">–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</div>
  <div class="pgrid" id="favGrid"></div>
  <div class="empty" id="favEmpty">
    <div class="empty-e">üí´</div>
    <div class="empty-h">–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</div>
    <div class="empty-p">–ù–∞–∂–∏–º–∞–π ü§ç –Ω–∞ —Ç–æ–≤–∞—Ä–∞—Ö, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</div>
  </div>
</div>

<!-- ADMIN -->
<div class="page" id="p-admin">
  <div class="adm-hero">
    <div class="adm-ico">üëë</div>
    <div><div class="adm-title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div><div class="adm-sub">–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ MarketX</div></div>
  </div>
  <div class="s4">
    <div class="scard" onclick="hpt('medium');toast('üë•','1 247 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π')"><div class="sc-ico">üë•</div><div class="sc-val">1,247</div><div class="sc-key">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div></div>
    <div class="scard" onclick="hpt('medium');toast('üì¶','3 891 –æ–±—ä—è–≤–ª–µ–Ω–∏–µ')"><div class="sc-ico">üì¶</div><div class="sc-val">3,891</div><div class="sc-key">–û–±—ä—è–≤–ª–µ–Ω–∏–π</div></div>
    <div class="scard" onclick="hpt('medium');toast('üí∞','–û–±–æ—Ä–æ—Ç ‚ÇΩ842K')"><div class="sc-ico">üí∞</div><div class="sc-val">‚ÇΩ842K</div><div class="sc-key">–û–±–æ—Ä–æ—Ç</div></div>
    <div class="scard" onclick="hpt('medium');toast('üìä','–û—Ç—á—ë—Ç –≥–æ—Ç–æ–≤')"><div class="sc-ico">üìä</div><div class="sc-val">94%</div><div class="sc-key">–î–æ–≤–æ–ª—å–Ω—ã—Ö</div></div>
  </div>
  <div class="row-bw"><div class="t-lbl" style="margin:0">–°–º–µ–Ω–∞ —Ä–æ–ª–∏ (–¥–µ–º–æ)</div></div>
  <div class="chips" id="roleChips" style="margin-bottom:18px">
    <div class="chip"    data-r="user"      onclick="setRole('user',this)">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
    <div class="chip"    data-r="moderator" onclick="setRole('moderator',this)">üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</div>
    <div class="chip on" data-r="owner"     onclick="setRole('owner',this)">üëë –í–ª–∞–¥–µ–ª–µ—Ü</div>
  </div>
  <div class="row-bw"><div class="t-lbl" style="margin:0">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div><div class="link-more">–í—Å–µ ‚Üí</div></div>
  <div id="admUsers"></div>
</div>

<!-- PROFILE -->
<div class="page" id="p-profile">
  <div class="prf">
    <div class="pav-w"><div class="pav" id="pAv">–ê</div><div class="pcrn" id="pCrn">üëë</div></div>
    <div class="pn" id="pName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
    <div class="prt pro" id="pRt">üëë –í–ª–∞–¥–µ–ª–µ—Ü</div>
    <div class="strow">
      <div class="stc"><div class="stv">24</div><div class="stk">–ü—Ä–æ–¥–∞–∂</div></div>
      <div class="stc"><div class="stv">‚ÇΩ48K</div><div class="stk">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div></div>
      <div class="stc"><div class="stv">4.9‚≠ê</div><div class="stk">–†–µ–π—Ç–∏–Ω–≥</div></div>
    </div>
  </div>
  <div class="setl">
    <div class="setr" onclick="hpt('light');toast('‚úèÔ∏è','–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å')"><span class="si">‚úèÔ∏è</span><span class="st_">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</span><span class="sa_">‚Ä∫</span></div>
    <div class="setr" onclick="hpt('light');toast('üîî','–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è')"><span class="si">üîî</span><span class="st_">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span><span class="sa_">‚Ä∫</span></div>
    <div class="setr" onclick="hpt('light');toast('üí≥','–ü–ª–∞—Ç—ë–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ')"><span class="si">üí≥</span><span class="st_">–ü–ª–∞—Ç—ë–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</span><span class="sa_">‚Ä∫</span></div>
    <div class="setr" onclick="hpt('light');toast('üîí','–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å')"><span class="si">üîí</span><span class="st_">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span><span class="sa_">‚Ä∫</span></div>
    <div class="setr" onclick="hpt('light');toast('üìû','–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞')"><span class="si">üìû</span><span class="st_">–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞</span><span class="sa_">‚Ä∫</span></div>
    <div class="setr" onclick="hpt('medium');toast('üëã','–î–æ —Å–≤–∏–¥–∞–Ω–∏—è!')"><span class="si">üö™</span><span class="st_ sred">–í—ã–π—Ç–∏</span><span class="sa_">‚Ä∫</span></div>
  </div>
  <div class="pver" id="pVer">@username ¬∑ MarketX v1.0</div>
</div>

</div><!-- /scroll -->

<!-- NAV -->
<nav id="nav">
  <button class="nb on" id="nb-home"     onclick="goPage('home')"><span class="nb-i">üè™</span><span class="nb-l">–ú–∞–≥–∞–∑–∏–Ω</span></button>
  <button class="nb"    id="nb-listings" onclick="goPage('listings')" style="position:relative"><span class="nb-i">üìù</span><span class="nb-l">–û–±—ä—è–≤–ª–µ–Ω–∏—è</span><span class="nb-dot"></span></button>
  <button class="nb"    id="nb-fav"      onclick="goPage('fav')"><span class="nb-i">ü§ç</span><span class="nb-l">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span></button>
  <button class="nb"    id="nb-admin"    onclick="goPage('admin')"><span class="nb-i">‚öôÔ∏è</span><span class="nb-l">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span></button>
  <button class="nb"    id="nb-profile"  onclick="goPage('profile')"><span class="nb-i">üë§</span><span class="nb-l">–ü—Ä–æ—Ñ–∏–ª—å</span></button>
</nav>

<!-- ADD MODAL -->
<div class="mo" id="mAdd" onclick="closeMo('mAdd',event)">
  <div class="ms">
    <div class="mh"></div>
    <div class="mt">‚ûï –ù–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</div>
    <div class="fb"><span class="fl">–ò–∫–æ–Ω–∫–∞ —Ç–æ–≤–∞—Ä–∞</span><div class="egrid" id="ejGrid"></div></div>
    <div class="fb"><span class="fl">–ù–∞–∑–≤–∞–Ω–∏–µ</span><input class="fc" id="nName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞"></div>
    <div class="fb"><span class="fl">–û–ø–∏—Å–∞–Ω–∏–µ</span><textarea class="fc" id="nDesc" placeholder="–°–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è‚Ä¶"></textarea></div>
    <div class="fb"><span class="fl">–¶–µ–Ω–∞ (‚ÇΩ)</span><input class="fc" id="nPrice" type="number" inputmode="numeric" placeholder="0"></div>
    <div class="fb"><span class="fl">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
      <select class="fc" id="nCat">
        <option value="electronics">üì± –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</option>
        <option value="clothes">üëó –û–¥–µ–∂–¥–∞</option>
        <option value="games">üéÆ –ò–≥—Ä—ã</option>
        <option value="home">üè† –î–æ–º</option>
        <option value="sport">‚öΩ –°–ø–æ—Ä—Ç</option>
        <option value="beauty">üíÑ –ö—Ä–∞—Å–æ—Ç–∞</option>
      </select>
    </div>
    <button class="btn-p" onclick="submitListing()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
  </div>
</div>

<!-- PRODUCT DETAIL MODAL -->
<div class="mo" id="mProd" onclick="closeMo('mProd',event)">
  <div class="ms">
    <div class="mh"></div>
    <div class="pd-img" id="pdImg">üì±</div>
    <div class="pd-n"   id="pdName">–ù–∞–∑–≤–∞–Ω–∏–µ</div>
    <div class="pd-p"   id="pdPrice">‚ÇΩ0</div>
    <div class="pd-s"   id="pdSeller">@seller</div>
    <div class="pd-d"   id="pdDesc">–û–ø–∏—Å–∞–Ω–∏–µ</div>
    <button class="btn-p" onclick="hpt('medium');toast('üõí','–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É!');closeMo('mProd',{target:document.getElementById('mProd')})">
      üõí –ö—É–ø–∏—Ç—å / –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É
    </button>
  </div>
</div>

<script>
'use strict';
const tg=window.Telegram?.WebApp??null;
if(tg){tg.ready();tg.expand();tg.enableClosingConfirmation();tg.setHeaderColor(tg.themeParams?.bg_color??'#17212b');tg.setBackgroundColor(tg.themeParams?.bg_color??'#17212b')}
const hpt=t=>tg?.HapticFeedback?.impactOccurred(t);
const hptn=t=>tg?.HapticFeedback?.notificationOccurred(t);
const tgU=tg?.initDataUnsafe?.user??{};
const uName=tgU.first_name??'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',uLast=tgU.last_name??'',uNick=tgU.username??'username',uPhoto=tgU.photo_url??null;

const PRODUCTS=[
  {id:1,e:'üì±',name:'iPhone 14 Pro 256GB',price:89900,cat:'electronics',seller:'@tech_store',badge:'hot',desc:'–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —á—ë—Ä–Ω—ã–π. –ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç, –≥–∞—Ä–∞–Ω—Ç–∏—è 6 –º–µ—Å.'},
  {id:2,e:'üëü',name:'Nike Air Max 95 OG',price:12500,cat:'clothes',seller:'@sneaker_ru',badge:'new',desc:'–†–∞–∑–º–µ—Ä 42 EU. –°–æ—Å—Ç–æ—è–Ω–∏–µ 9/10. –û—Ä–∏–≥–∏–Ω–∞–ª.'},
  {id:3,e:'üéÆ',name:'DualSense PS5 White',price:7200,cat:'games',seller:'@games_shop',badge:'',desc:'–ù–æ–≤—ã–π –≤ –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–π —É–ø–∞–∫–æ–≤–∫–µ.'},
  {id:4,e:'üéß',name:'AirPods Pro 2 MagSafe',price:24990,cat:'electronics',seller:'@apple_fan',badge:'hot',desc:'–ö—É–ø–ª–µ–Ω—ã 3 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥. –û—Ä–∏–≥–∏–Ω–∞–ª Apple.'},
  {id:5,e:'‚åö',name:'Apple Watch Series 9',price:32900,cat:'electronics',seller:'@apple_fan',badge:'',desc:'45mm, Midnight. –ù–æ–≤—ã–π, –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.'},
  {id:6,e:'üëó',name:'–ü—É—Ö–æ–≤–∏–∫ Canada Goose',price:48750,cat:'clothes',seller:'@fashion_msk',badge:'new',desc:'–†–∞–∑–º–µ—Ä M, —á—ë—Ä–Ω—ã–π. –û—Ä–∏–≥–∏–Ω–∞–ª, –µ—Å—Ç—å —á–µ–∫.'},
  {id:7,e:'üõãÔ∏è',name:'–ö—Ä–µ—Å–ª–æ Herman Miller',price:89400,cat:'home',seller:'@mebel_pro',badge:'sale',desc:'–†–∞–∑–º–µ—Ä C. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å 2 –º–µ—Å—è—Ü–∞ –¥–æ–º–∞.'},
  {id:8,e:'üèãÔ∏è',name:'–®—Ç–∞–Ω–≥–∞ –æ–ª–∏–º–ø. 60–∫–≥',price:15600,cat:'sport',seller:'@sportlife_ru',badge:'sale',desc:'–ì—Ä–∏—Ñ 2.2–º + –¥–∏—Å–∫–∏. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å Torneo.'},
  {id:9,e:'üíÑ',name:'–ü–∞–ª–µ—Ç–∫–∞ MAC 24 —Ç–µ–Ω–∏',price:5800,cat:'beauty',seller:'@beauty_box',badge:'',desc:'–û—Ä–∏–≥–∏–Ω–∞–ª, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ 2 —Ä–∞–∑–∞.'},
  {id:10,e:'üì∏',name:'Sony ZV-E10 + Kit',price:54000,cat:'electronics',seller:'@photo_shop',badge:'',desc:'–ü—Ä–æ–±–µ–≥ 2000 –∫–∞–¥—Ä–æ–≤. –ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç.'},
];
const MY_LISTINGS=[
  {id:1,e:'üíª',name:'MacBook Air M2',desc:'8/256GB, Silver',price:85000,status:'active'},
  {id:2,e:'üì∏',name:'Canon EOS M50 II',desc:'Kit 15-45mm',price:32000,status:'sold'},
  {id:3,e:'üéß',name:'Sony WH-1000XM5',desc:'NC –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ',price:22500,status:'pending'},
];
const ADM_USERS=[
  {i:'–ú',name:'–ú–∞—Ä–∏—è –°–º–∏—Ä–Ω–æ–≤–∞',tg:'@masha_s',role:'moderator',c:'#8b5cf6'},
  {i:'–î',name:'–î–º–∏—Ç—Ä–∏–π –ö—É–∑–Ω–µ—Ü–æ–≤',tg:'@dima_k',role:'user',c:'#10b981'},
  {i:'–ï',name:'–ï–ª–µ–Ω–∞ –ü–æ–ø–æ–≤–∞',tg:'@elena_p',role:'moderator',c:'#f59e0b'},
  {i:'–ò',name:'–ò–≤–∞–Ω –°–æ–∫–æ–ª–æ–≤',tg:'@ivan_sokol',role:'user',c:'#3b82f6'},
  {i:'–û',name:'–û–ª—å–≥–∞ –ù–æ–≤–∏–∫–æ–≤–∞',tg:'@olga_n',role:'user',c:'#f43f5e'},
];
const EMOJIS=['üì±','üíª','üëü','üéÆ','üì∏','üéß','üëó','‚åö','üß¥','üèãÔ∏è','üõãÔ∏è','üé®','üöó','üé∏','üìö','üß∏','üéÄ','üõí','üîß','üí°','üé©','üï∂Ô∏è'];
let favs=new Set(),selEmoji='üì±',activeCat='all',role='owner';

function init(){
  document.getElementById('gName').textContent=uName;
  document.getElementById('pName').textContent=(uName+' '+uLast).trim();
  document.getElementById('pVer').textContent=`@${uNick} ¬∑ MarketX v1.0`;
  const pav=document.getElementById('pAv');
  if(uPhoto){const img=new Image();img.src=uPhoto;img.onload=()=>{pav.innerHTML='';pav.appendChild(img)};}
  else pav.textContent=uName.charAt(0).toUpperCase();
  buildEJ();renderProds(PRODUCTS);renderListings();renderAdm();updateRole();
}

const TABS=['home','listings','fav','admin','profile'];
function goPage(id){
  hpt('light');
  TABS.forEach(t=>{
    document.getElementById('p-'+t)?.classList.toggle('on',t===id);
    document.getElementById('nb-'+t)?.classList.toggle('on',t===id);
  });
  document.getElementById('scroll').scrollTo(0,0);
  if(id==='fav')renderFav();
  if(id==='listings'){tg?.MainButton?.setText('‚ûï –î–æ–±–∞–≤–∏—Ç—å');tg?.MainButton?.onClick(openAdd);tg?.MainButton?.show();}
  else{tg?.MainButton?.hide();tg?.MainButton?.offClick(openAdd);}
  tg?.BackButton?.[id==='home'?'hide':'show']();
}
tg?.BackButton?.onClick(()=>{
  if(document.getElementById('mAdd').classList.contains('on')){document.getElementById('mAdd').classList.remove('on');return;}
  if(document.getElementById('mProd').classList.contains('on')){document.getElementById('mProd').classList.remove('on');return;}
  goPage('home');tg.BackButton.hide();
});

function renderProds(list){
  const g=document.getElementById('pGrid');
  if(!list.length){g.innerHTML=`<div style="grid-column:1/-1;text-align:center;color:var(--hint);padding:40px 0;font-size:14px">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòî</div>`;return;}
  g.innerHTML=list.map((p,i)=>`
    <div class="pcard" style="animation-delay:${i*.04}s" onclick="openProd(${p.id})">
      <div class="pimg">
        ${p.e}
        ${p.badge?`<div class="pbdg ${p.badge==='hot'?'bh':p.badge==='new'?'bn':'bs'}">${{hot:'üî• –•–∏—Ç',new:'‚ú® –ù–æ–≤—ã–π',sale:'üí• –°–∫–∏–¥–∫–∞'}[p.badge]}</div>`:''}
        <button class="fbtn" id="fb${p.id}" onclick="event.stopPropagation();toggleFav(${p.id})">${favs.has(p.id)?'‚ù§Ô∏è':'ü§ç'}</button>
      </div>
      <div class="pbody">
        <div class="pname">${p.name}</div>
        <div class="pfoot">
          <div class="pprice">‚ÇΩ${p.price.toLocaleString('ru-RU')}</div>
          <button class="cbtn" onclick="event.stopPropagation();hpt('medium');toast('üõí','–í –∫–æ—Ä–∑–∏–Ω—É!')">+</button>
        </div>
        <div class="pseller">${p.seller}</div>
      </div>
    </div>`).join('');
}
function doSearch(q){renderProds(PRODUCTS.filter(p=>p.name.toLowerCase().includes(q.toLowerCase())&&(activeCat==='all'||p.cat===activeCat)));}
function doChip(cat){
  hpt('light');activeCat=cat;
  document.querySelectorAll('#chipRow .chip').forEach(c=>c.classList.toggle('on',c.dataset.c===cat));
  document.getElementById('sInp').value='';
  renderProds(cat==='all'?PRODUCTS:PRODUCTS.filter(p=>p.cat===cat));
}
function openProd(id){
  hpt('light');const p=PRODUCTS.find(x=>x.id===id);if(!p)return;
  document.getElementById('pdImg').textContent=p.e;
  document.getElementById('pdName').textContent=p.name;
  document.getElementById('pdPrice').textContent=`‚ÇΩ${p.price.toLocaleString('ru-RU')}`;
  document.getElementById('pdSeller').textContent=p.seller;
  document.getElementById('pdDesc').textContent=p.desc;
  document.getElementById('mProd').classList.add('on');
  tg?.BackButton?.show();
}
function toggleFav(id){
  hpt('medium');
  if(favs.has(id)){favs.delete(id);hptn('warning');toast('üíî','–£–±—Ä–∞–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ');}
  else{favs.add(id);hptn('success');toast('‚ù§Ô∏è','–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ');}
  const b=document.getElementById('fb'+id);if(b)b.textContent=favs.has(id)?'‚ù§Ô∏è':'ü§ç';
  document.querySelector('#nb-fav .nb-i').textContent=favs.size?'‚ù§Ô∏è':'ü§ç';
}
function renderFav(){
  const list=PRODUCTS.filter(p=>favs.has(p.id));
  const g=document.getElementById('favGrid'),e=document.getElementById('favEmpty');
  if(!list.length){g.innerHTML='';e.style.display='flex';return;}
  e.style.display='none';
  g.innerHTML=list.map(p=>`
    <div class="pcard" onclick="openProd(${p.id})">
      <div class="pimg">${p.e}<button class="fbtn" onclick="event.stopPropagation();toggleFav(${p.id});renderFav()">‚ù§Ô∏è</button></div>
      <div class="pbody"><div class="pname">${p.name}</div><div class="pfoot"><div class="pprice">‚ÇΩ${p.price.toLocaleString('ru-RU')}</div></div><div class="pseller">${p.seller}</div></div>
    </div>`).join('');
}
function renderListings(){
  document.getElementById('lstWrap').innerHTML=MY_LISTINGS.map(l=>`
    <div class="li" onclick="hpt('light');toast('üìÑ','${l.name.replace(/'/g,"\\'")}')">
      <div class="li-ico">${l.e}</div>
      <div style="flex:1;min-width:0">
        <div class="li-name">${l.name}</div>
        <div class="li-desc">${l.desc}</div>
        <div class="li-row">
          <div class="li-price">‚ÇΩ${l.price.toLocaleString('ru-RU')}</div>
          <div class="sc ${l.status==='active'?'sa':l.status==='sold'?'ss':'sp'}">${l.status==='active'?'‚úì –ê–∫—Ç–∏–≤–Ω–æ':l.status==='sold'?'‚úó –ü—Ä–æ–¥–∞–Ω–æ':'‚è≥ –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ'}</div>
        </div>
      </div>
    </div>`).join('');
}
function buildEJ(){document.getElementById('ejGrid').innerHTML=EMOJIS.map((e,i)=>`<div class="ej ${i===0?'on':''}" onclick="pickEJ(this,'${e}')">${e}</div>`).join('');}
function pickEJ(el,e){hpt('light');document.querySelectorAll('.ej').forEach(x=>x.classList.remove('on'));el.classList.add('on');selEmoji=e;}
function openAdd(){hpt('light');document.getElementById('mAdd').classList.add('on');tg?.BackButton?.show();}
function submitListing(){
  const name=document.getElementById('nName').value.trim();
  const price=parseInt(document.getElementById('nPrice').value)||0;
  const desc=document.getElementById('nDesc').value.trim()||'–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è';
  if(!name||!price){hptn('error');toast('‚ö†Ô∏è','–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ü–µ–Ω—É');return;}
  MY_LISTINGS.unshift({id:Date.now(),e:selEmoji,name,desc,price,status:'pending'});
  renderListings();
  tg?.sendData?.(JSON.stringify({action:'new_listing',name,price,emoji:selEmoji,desc}));
  document.getElementById('mAdd').classList.remove('on');
  ['nName','nDesc','nPrice'].forEach(id=>document.getElementById(id).value='');
  hptn('success');toast('üéâ','–û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é!');
}
function renderAdm(){
  document.getElementById('admUsers').innerHTML=ADM_USERS.map(u=>`
    <div class="urow">
      <div class="uav" style="background:${u.c}20;color:${u.c}">${u.i}</div>
      <div><div class="un">${u.name}</div><div class="ur" style="color:${u.role==='moderator'?'#8b5cf6':'var(--hint)'}">${u.role==='moderator'?'üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä':'üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}</div><div class="utg">${u.tg}</div></div>
      <div class="ubtns">
        ${role==='owner'?`<button class="ubtn um" onclick="hpt('medium');toast('üõ°Ô∏è','–†–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∞')">–†–æ–ª—å</button>`:''}
        <button class="ubtn uw" onclick="hpt('medium');toast('‚ö†Ô∏è','Warn –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω')">Warn</button>
        <button class="ubtn ub" onclick="hpt('medium');toast('üö´','–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω')">Ban</button>
      </div>
    </div>`).join('');
}
function setRole(r,el){
  hpt('medium');role=r;
  document.querySelectorAll('#roleChips .chip').forEach(c=>c.classList.toggle('on',c.dataset.r===r));
  updateRole();renderAdm();
  toast('üîÑ',{owner:'–í—ã ‚Äî üëë –í–ª–∞–¥–µ–ª–µ—Ü',moderator:'–í—ã ‚Äî üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä',user:'–í—ã ‚Äî üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}[r]);
}
function updateRole(){
  const C={owner:{pc:'rt-own',prt:'pro',lbl:'üëë –í–ª–∞–¥–µ–ª–µ—Ü',crn:'üëë',adm:true},moderator:{pc:'rt-mod',prt:'prm',lbl:'üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä',crn:'üõ°Ô∏è',adm:true},user:{pc:'rt-usr',prt:'pru',lbl:'üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',crn:'',adm:false}}[role];
  document.getElementById('rolePill').className=`role-tag ${C.pc}`;document.getElementById('rolePill').textContent=C.lbl;
  document.getElementById('pRt').className=`prt ${C.prt}`;document.getElementById('pRt').textContent=C.lbl;
  const cr=document.getElementById('pCrn');cr.textContent=C.crn;cr.style.display=C.crn?'':'none';
  document.getElementById('nb-admin').style.display=C.adm?'':'none';
}
function closeMo(id,e){if(e.target===document.getElementById(id))document.getElementById(id).classList.remove('on');}
let _tt;
function toast(ico,txt){
  clearTimeout(_tt);
  document.getElementById('tIco').textContent=ico;document.getElementById('tTxt').textContent=txt;
  const el=document.getElementById('toast');el.classList.add('on');
  _tt=setTimeout(()=>el.classList.remove('on'),2600);
}
init();
</script>
</body>
</html>
